{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }} - HB China Cars{% endblock %}

{% block page_title %}{{ title }}{% endblock %}

{% block content %}
<main class="main-content">
  <div class="supplier-form-container">
    <div class="supplier-form-header">
      <h1 class="page-header">
        <img class="page-icon" src="{% static 'images/new-purchase-icon.png' %}" alt="supplier icon" />
        {% if supplier %}Edit Supplier{% else %}New Supplier{% endif %}
      </h1>
    </div>

    <div class="card">
      <div class="step-header">
        <h2 class="step-title">{% if supplier %}Edit Supplier Information{% else %}Step 1: Supplier Information{% endif %}</h2>
      </div>

      {% if form.errors %}
      <div class="alert alert-error mb-4">
        <strong>Error!</strong> Please correct the errors below.
      </div>
      {% endif %}

      <form method="post" class="supplier-form" novalidate>
        {% csrf_token %}
        
        <div class="form-grid-2">
          <div class="form-section">
            <h3 class="section-title">SUPPLIER INFORMATION</h3>

            <div class="form-group">
              <label class="form-label required">Supplier Name</label>
              <input type="text" name="name" class="form-input" placeholder="Enter supplier name" value="{{ form.name.value|default:'' }}" required>
              {% if form.name.errors %}
              <span class="form-error">{{ form.name.errors.0 }}</span>
              {% endif %}
            </div>

            <div class="form-group">
              <label class="form-label required">Country</label>
              <select name="country" class="form-select" required>
                <option value="">Select country</option>
                <option value="China" {% if form.country.value == 'China' %}selected{% endif %}>China</option>
                <option value="Japan" {% if form.country.value == 'Japan' %}selected{% endif %}>Japan</option>
                <option value="South Korea" {% if form.country.value == 'South Korea' %}selected{% endif %}>South Korea</option>
                <option value="UAE" {% if form.country.value == 'UAE' %}selected{% endif %}>UAE</option>
              </select>
              {% if form.country.errors %}
              <span class="form-error">{{ form.country.errors.0 }}</span>
              {% endif %}
            </div>

            <div class="form-group">
              <label class="form-label">Address</label>
              <textarea name="address" class="form-textarea" rows="4" placeholder="Enter full address">{{ form.address.value|default:'' }}</textarea>
              {% if form.address.errors %}
              <span class="form-error">{{ form.address.errors.0 }}</span>
              {% endif %}
            </div>
          </div>

          <div class="form-section">
            <h3 class="section-title">CONTACT DETAILS</h3>

            <div class="form-group">
              <label class="form-label required">Contact Person</label>
              <input type="text" name="contact_person" class="form-input" placeholder="Enter contact person name" value="{{ form.contact_person.value|default:'' }}" required>
              {% if form.contact_person.errors %}
              <span class="form-error">{{ form.contact_person.errors.0 }}</span>
              {% endif %}
            </div>

            <div class="form-group">
              <label class="form-label required">Phone</label>
              <input type="tel" name="phone" class="form-input" placeholder="+__ ___ ___ ____" value="{{ form.phone.value|default:'' }}" required>
              {% if form.phone.errors %}
              <span class="form-error">{{ form.phone.errors.0 }}</span>
              {% endif %}
            </div>

            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" name="email" class="form-input" placeholder="email@example.com" value="{{ form.email.value|default:'' }}">
              {% if form.email.errors %}
              <span class="form-error">{{ form.email.errors.0 }}</span>
              {% endif %}
            </div>

            <div class="form-group">
              <label class="form-label required">Preferred Currency</label>
              <div class="radio-group horizontal">
                <div class="radio-option">
                  <input type="radio" name="currency" id="currency-cny" value="CNY" {% if form.currency.value == 'CNY' or not form.currency.value %}checked{% endif %}>
                  <label for="currency-cny">CNY</label>
                </div>
                <div class="radio-option">
                  <input type="radio" name="currency" id="currency-usd" value="USD" {% if form.currency.value == 'USD' %}checked{% endif %}>
                  <label for="currency-usd">USD</label>
                </div>
                <div class="radio-option">
                  <input type="radio" name="currency" id="currency-eur" value="EUR" {% if form.currency.value == 'EUR' %}checked{% endif %}>
                  <label for="currency-eur">EUR</label>
                </div>
              </div>
              {% if form.currency.errors %}
              <span class="form-error">{{ form.currency.errors.0 }}</span>
              {% endif %}
            </div>
          </div>

          <div class="form-section">
            <h3 class="section-title">PAYMENT & BANKING INFORMATION</h3>

            <div class="form-group">
              <label class="form-label">Payment Terms</label>
              <input type="text" name="payment_terms" class="form-input" placeholder="e.g., 30% deposit, 70% before shipment" value="{{ form.payment_terms.value|default:'' }}">
              {% if form.payment_terms.errors %}
              <span class="form-error">{{ form.payment_terms.errors.0 }}</span>
              {% endif %}
            </div>

            <div class="form-group">
              <label class="form-label">Bank Details</label>
              <textarea name="bank_details" class="form-textarea" rows="4" placeholder="Enter bank name, account number, SWIFT code, etc.">{{ form.bank_details.value|default:'' }}</textarea>
              {% if form.bank_details.errors %}
              <span class="form-error">{{ form.bank_details.errors.0 }}</span>
              {% endif %}
            </div>
          </div>

          <div class="form-section">
            <h3 class="section-title">ADDITIONAL INFORMATION</h3>

            <div class="form-group">
              <label class="form-label">Notes</label>
              <textarea name="notes" class="form-textarea" rows="4" placeholder="Any additional notes about this supplier">{{ form.notes.value|default:'' }}</textarea>
              {% if form.notes.errors %}
              <span class="form-error">{{ form.notes.errors.0 }}</span>
              {% endif %}
            </div>

            <div class="form-group">
              <label class="form-label">Status</label>
              <div class="radio-group horizontal">
                <div class="radio-option">
                  <input type="radio" name="is_active" id="status-active" value="true" {% if form.is_active.value != 'false' %}checked{% endif %}>
                  <label for="status-active">Active</label>
                </div>
                <div class="radio-option">
                  <input type="radio" name="is_active" id="status-inactive" value="false" {% if form.is_active.value == 'false' %}checked{% endif %}>
                  <label for="status-inactive">Inactive</label>
                </div>
              </div>
              {% if form.is_active.errors %}
              <span class="form-error">{{ form.is_active.errors.0 }}</span>
              {% endif %}
            </div>
          </div>
        </div>

        <div class="button-group">
          <a href="{% url 'suppliers:list' %}" class="btn-cancel">Cancel</a>
          <button type="submit" class="btn-next">Save Supplier</button>
        </div>
      </form>
    </div>
  </div>
</main>
{% endblock %}
